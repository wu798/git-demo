(function(){var t={4361:function(t,e,r){"use strict";r(2443);var n=r(9864),i=(r(7322),r(6631)),a=(r(5825),r(9858)),s=(r(9495),r(32)),o=(r(3816),r(3946)),l=(r(3316),r(4639)),c=(r(9031),r(6790)),u=(r(4399),r(5947)),h=(r(2986),r(2628)),d=(r(319),r(9245)),p=(r(8984),r(797)),f=r(6369),m=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},v=[],y={name:"APP"},g=y,_=r(1001),b=(0,_.Z)(g,m,v,!1,null,null,null),k=b.exports,Z=r(2631),w=function(){var t=this,e=t._self._c;return e("div",[e("van-nav-bar",{attrs:{title:t.activeTitle,fixed:""}}),e("div",{staticClass:"main"},[e("keep-alive",[e("router-view")],1)],1),e("van-tabbar",{attrs:{route:""}},[e("van-tabbar-item",{attrs:{icon:"home-o",replace:"",to:"/layout/home"}},[t._v("首页")]),e("van-tabbar-item",{attrs:{icon:"search",to:"/layout/search"}},[t._v("搜索")])],1)],1)},C=[],L={data(){return{activeTitle:this.$route.meta.title}},watch:{$route(){this.activeTitle=this.$route.meta.title}}},x=L,P=(0,_.Z)(x,w,C,!1,null,"19402592",null),T=P.exports,$=function(){var t=this,e=t._self._c;return e("div",[e("p",{staticClass:"title"},[t._v("推荐歌单")]),e("van-row",{attrs:{gutter:"20",type:"flex",justify:"space-around"}},t._l(t.reList,(function(r){return e("van-col",{key:r.id,attrs:{span:"8"}},[e("van-image",{attrs:{width:"100",height:"100",fit:"cover",src:r.picUrl}}),e("p",{staticClass:"song_name"},[t._v(t._s(r.name))])],1)})),1),e("p",{staticClass:"title"},[t._v("最新音乐")]),t._l(t.songList,(function(r){return e("router-link",{key:r.id,attrs:{to:`/player/${r.id}/${r.name}/${t.setUrl(r.picUrl)}`}},[e("van-cell-group",[e("van-cell",{attrs:{center:"",title:r.name,label:r.song.artists[0].name},scopedSlots:t._u([{key:"right-icon",fn:function(){return[e("van-icon",{attrs:{name:"play-circle-o"}})]},proxy:!0}],null,!0)})],1)],1)}))],2)},E=[],U=(r(1703),r(6265)),O=r.n(U),S=null;S="http://iwenwiki.com:3000";const H=O().create({baseURL:S,timeout:4e3});H.interceptors.request.use((t=>t)),H.interceptors.response.use((t=>t.data),(t=>Promise.reject(new Error("faile"))));var j=H;const z=t=>j({url:"/personalized?limit=6",params:t}),K=()=>j({url:"/personalized/newsong?limit=10",method:"get"}),R=()=>j({url:"/search/hot",method:"get"}),D=t=>j({url:"/search",params:t}),A=t=>j({url:"/lyric",params:t});var V={name:"Home",data(){return{reList:[],songList:[]}},created(){z().then((t=>{this.reList=t.result})),K().then((t=>{this.songList=t.result}))},methods:{setUrl(t){if(t)return encodeURIComponent(t)}}},I=V,q=(0,_.Z)(I,$,E,!1,null,"5bf86594",null),M=q.exports,N=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"searchHeader"},[e("van-nav-bar",{scopedSlots:t._u([{key:"left",fn:function(){return[e("van-icon",{attrs:{name:"arrow-left",size:"0.67rem"},on:{click:function(e){return t.$router.go(-1)}}})]},proxy:!0}])})],1),e("van-search",{attrs:{shape:"round",placeholder:"请输入搜索关键词"},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}}),0===t.resultList.length?e("div",{staticClass:"search_wrap"},[e("p",{staticClass:"hot_title"},[t._v("热门搜索")]),e("div",{staticClass:"hot_name_wrap"},t._l(t.hotArr,(function(r,n){return e("span",{key:n,staticClass:"hot_item",on:{click:function(e){return t.btn(r.first)}}},[t._v(t._s(r.first))])})),0)]):e("div",{staticClass:"search_wrap"},[e("p",{staticClass:"hot_title"},[t._v("最佳匹配")]),t._l(t.resultList,(function(r){return e("router-link",{key:r.id,attrs:{to:`/player/${r.id}/${r.name}/${r.picUrl}`}},[e("van-cell-group",[e("van-cell",{attrs:{center:"",title:r.name},scopedSlots:t._u([{key:"right-icon",fn:function(){return[e("van-icon",{attrs:{name:"play-circle-o"}})]},proxy:!0}],null,!0)})],1)],1)}))],2)],1)},W=[],F={data(){return{searchValue:"",hotArr:[],resultList:[],timer:null}},async created(){const t=await R();this.hotArr=t.result.hots},methods:{btn(t){this.searchValue=t},setUrl(t){if(t)return encodeURIComponent(t)}},watch:{searchValue(t){if(clearTimeout(this.timer),0===t.length)return this.resultList=[];this.timer=setTimeout((async()=>{await D({keywords:t}).then((t=>{this.resultList=t.result.songs}))}),500)}}},B=F,G=(0,_.Z)(B,N,W,!1,null,"9e8ce31c",null),J=G.exports,Q=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"title"},[e("van-nav-bar",{attrs:{title:t.$route.params.name},scopedSlots:t._u([{key:"left",fn:function(){return[e("van-icon",{attrs:{name:"arrow-left",size:"0.67rem"},on:{click:function(e){return t.$router.go(-1)}}})]},proxy:!0},{key:"right",fn:function(){return[e("van-icon",{attrs:{name:"search",size:"0.67rem"},on:{click:t.goSearch}})]},proxy:!0}])})],1),e("div",{staticClass:"img"},[e("van-image",{attrs:{width:"8rem",height:"8rem",fit:"cover",round:"",src:t.$route.params.picUrl}})],1),e("div",{staticClass:"icon"},[e("van-icon",{attrs:{name:t.like},on:{click:t.change1}}),e("van-icon",{attrs:{name:"share-o"}})],1),e("div",{staticClass:"song"},[e("div",{staticClass:"songWord"},[e("Lrc",{attrs:{id:t.$route.params.id,currentTime:t.currentTime}})],1),e("audio",{ref:"player",attrs:{src:t.getUrl,controls:"",autoplay:""}})])])},X=[],Y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"lrcContainer"},[e("div",{ref:"lrc",staticClass:"lrc"},t._l(t.LrcData,(function(r,n,i){return e("p",{key:i,staticClass:"lrc-p",class:{active:t.currentTime>t.allKyes[i]&&t.currentTime<t.allKyes[i+1]}},[e("span",[t._v(t._s(r)+t._s(t.scollLrc(i))+" ")])])})),0)])},tt=[],et={name:"LRC",data(){return{LrcData:"",allKyes:[]}},props:{id:{type:[String,Number],required:!0},currentTime:{type:Number,required:0}},mounted(){A({id:this.id}).then((t=>{this.LrcData=t.lrc.lyric,this.filterLRC(t.lrc.lyric)}))},methods:{filterLRC(t){if(t){for(var e={},r=t.split("\n"),n=/\[\d*:\d*(\.|:)\d*]/g,i=0;i<r.length;i++){var a=r[i].match(n);if(a){var s=r[i].replace(a,""),o=a[0],l=parseInt(o.match(/\[\d*/i).toString().slice(1)),c=parseInt(o.match(/\:\d*/i).toString().slice(1)),u=60*l+c;e[u]=s}}this.LrcData=e,this.getAllKeys(e)}},getAllKeys(t){for(var e in t)this.allKyes.push(e)},scollLrc(t){this.currentTime>this.allKyes[t]&&this.currentTime<this.allKyes[t+1]&&(this.$refs.lrc.style.top=-30*(t-2)+"px")}}},rt=et,nt=(0,_.Z)(rt,Y,tt,!1,null,null,null),it=nt.exports,at={name:"Player",data(){return{like:"like-o",songData:{},id:"",flag:!0,currentTime:0}},components:{Lrc:it},computed:{getUrl(){return decodeURIComponent("http://music.163.com/song/media/outer/url?id="+this.$route.params.id+".mp3")}},beforeDestroy(){this.removEvenHandle()},mounted(){this.addEvenHandle()},methods:{change1(){this.flag=!this.flag,this.flag?this.like="like":this.like="like-o"},goSearch(){this.$router.push({path:"/layout/search"})},addEvenHandle(){this.$refs.player.addEventListener("timeupdate",this.currentTimeHandle)},removEvenHandle(){this.$refs.player.removeEventListener("timeupdate",this.currentTimeHandle)},currentTimeHandle(){this.currentTime=this.$refs.player.currentTime}}},st=at,ot=(0,_.Z)(st,Q,X,!1,null,"10767aa6",null),lt=ot.exports,ct=new Z.Z({mode:"hash",routes:[{path:"/",redirect:"/layout"},{path:"/layout",redirect:"/layout/home",component:T,children:[{path:"home",component:M,meta:{title:"首页"}},{path:"search",component:J,meta:{title:"搜索"}}]},{path:"/player/:id/:name/:picUrl",component:lt}]});r(1305);f.ZP.use(p.Z),f.ZP.use(d.Z),f.ZP.use(h.Z),f.ZP.use(Z.Z),f.ZP.use(u.Z),f.ZP.use(c.Z),f.ZP.use(l.Z),f.ZP.use(o.Z),f.ZP.use(s.Z),f.ZP.use(a.Z),f.ZP.use(i.Z),f.ZP.use(n.Z),f.ZP.config.productionTip=!1,new f.ZP({render:t=>t(k),router:ct}).$mount("#app")},1305:function(){(function(t,e){var r=e.documentElement,n=t.devicePixelRatio||1;function i(){e.body?e.body.style.fontSize=12*n+"px":e.addEventListener("DOMContentLoaded",i)}function a(){var t=r.clientWidth/10;r.style.fontSize=t+"px"}if(i(),a(),t.addEventListener("resize",a),t.addEventListener("pageshow",(function(t){t.persisted&&a()})),n>=2){var s=e.createElement("body"),o=e.createElement("div");o.style.border=".5px solid transparent",s.appendChild(o),r.appendChild(s),1===o.offsetHeight&&r.classList.add("hairlines"),r.removeChild(s)}})(window,document)}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var a=e[n]={exports:{}};return t[n](a,a.exports,r),a.exports}r.m=t,function(){var t=[];r.O=function(e,n,i,a){if(!n){var s=1/0;for(u=0;u<t.length;u++){n=t[u][0],i=t[u][1],a=t[u][2];for(var o=!0,l=0;l<n.length;l++)(!1&a||s>=a)&&Object.keys(r.O).every((function(t){return r.O[t](n[l])}))?n.splice(l--,1):(o=!1,a<s&&(s=a));if(o){t.splice(u--,1);var c=i();void 0!==c&&(e=c)}}return e}a=a||0;for(var u=t.length;u>0&&t[u-1][2]>a;u--)t[u]=t[u-1];t[u]=[n,i,a]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};r.O.j=function(e){return 0===t[e]};var e=function(e,n){var i,a,s=n[0],o=n[1],l=n[2],c=0;if(s.some((function(e){return 0!==t[e]}))){for(i in o)r.o(o,i)&&(r.m[i]=o[i]);if(l)var u=l(r)}for(e&&e(n);c<s.length;c++)a=s[c],r.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return r.O(u)},n=self["webpackChunktest"]=self["webpackChunktest"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=r.O(void 0,[998],(function(){return r(4361)}));n=r.O(n)})();
//# sourceMappingURL=app.7d526cef.js.map